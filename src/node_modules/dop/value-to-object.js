var helpers = require('helpers');



function valueToObject(input, rules) {
	// Early termination -------------------------------------------------------

	if (prelude.isType('Object', input)) {
		return input;
	}

	// Input arguments processing ----------------------------------------------

	// ------------------------------------------------------------------- rules

	if (rules == null) {rules = {}}

	// Processing --------------------------------------------------------------

	var handler;
	helpers.forKeyValue(function(type, rule) {
		if (prelude.isType(type, input)) {
			switch (helpers.getType(rule)) {

				case 'String': // -------------------------------- property name
					handler = function(input) {
						var output = {};
						output[rule] = input;
						return output;
					}
					break;

				case 'Function': // --------------------------- function handler
					handler = rule;
					break;

				default: // -------------------------------------------- invalid
					handler = function() {return {}};

			}

			return true;
		}
	}, rules);

	// Return ------------------------------------------------------------------

	return handler(input);
}



module.exports = valueToObject;
